
--- PAGE 1 ---
Appendix DA crash course in PythonD.1 IntroductionHow to install Python 3 and write your ﬁrst programGo to the webpagehttps://www.spyder∗ide.organd download and install the latestversion of Spyder. Once installed, launch this program. On a Mac (a few versions ago,at least) this would open the following window.
Fig. 1. The graphical user interface of the Spyder editor for Python.Exercise D.1Typeprint("Helloworld")in the editor window and press the greenplay button. What output do you get? Also tryprint("2+2=",2+2).Remark: Notice how Python treats"2+2"as text to be printed, and2+2as somethingto be computed, and that a comma is used to separate diﬃerent type of input.D-1


--- PAGE 2 ---
D-2APPENDIX D. A CRASH COURSE IN PYTHONAﬁ r s tl o o ka tb a s i cs y n t a xf o ra r i t h m e t i ci nP y t h o nWe now consider how to do basic arithmetic in Python. Here is a ﬁrst example.
Example D.2Enter the following code into the Spyder editor.1a=22b=43c=a+b4print("a+b=",c )When you press the green play button you get the outputa+b=6.This seems reasonable. Here,a,bandcare what is called variables. Technicallyspeaking, a variable is a space in the memory of the computer which can store one pieceof information, such as a number. In the above example, they work pretty much likewhat we would expect of a mathematical variable. But the next example shows that thisis not always the case:
Example D.3Enter the following code into the Spyder editor.1a=22b=43c=a+b4a=105print("a+b=",c )When you press the green play button you still get the outputa+b=6.Wait, what? Does Python really mean that10 + 4 = 6? Well, no. The program isdoing exactly what it is told. The thing is that we, ourselves, do not really understandwhat we just asked Python to do. So let us try to ﬁgure it out. As an example. here isa line by line explanation of what happens in Example D.2:Line 1:Python creates avariableaand assignsit the value2.Line 2:Python creates avariableband assignsit the value4.Line 3:Python creates avariablec, computesthe valuea+b,a n da s s i g n st h i sv a l u et oc.Line 4:Python prints the value ofcon thescreen (together with the string of text"a+b").
Fig. 2. To explain the code, wereplace the equal signs by arrows.


--- PAGE 3 ---
D.1. INTRODUCTIOND-3The above example illustrates several peculiarities of arithmetic in Python and howa code is run:1.The code is executed line by line.2.Expressions such thata=bshould be read from the right to the left. That is,ais assigned whatever valuebhas, but not vice versa (ifbdoes not have a value,the program will (probably) crash). For this reason, an arrow makes more sensethan an equal sign.3.If a variable gets assigned some value, it has no memory of how that happened.That is, in the second example,cgets assigned the valuea+b. But whenaischanged in the next line, this does not aﬀect the value stored inc.Exercise D.4Explore the various ways to do arithmetic operations in Python byrunning the following commands for suitable values ofaandb:(a)a+b(b)a∗b(c)a−b(d)a−−b(e)a/b(f)a//b(g)a%bWe now turn to a discussion of the basic syntax in Python. That is, what are thebasic rules for how we are allowed to write a code? First, let us discuss the types ofnames you are allowed to give a variable:Example D.5You can give variables much more interesting names than just, say,a,b,xory. Here is an example of a perfectly well-functioning program:1ponies =22cookies =43pony_Cookie32=p o n i e s+c o o k i e s4print(pony_Cookie32)We make the following remarks:4.Python is case sensitive. This means thatnandNare as diﬀerent asnandm.5.By "tradition", the name of a variable should never start with an upper case letter.6.A variable cannot be given a numerical name such as2or34(in particular, thismeans that the code2=awill crash, since Python is trying to create a variablecalled2and assign it whatever value is stored in the variablea). However, numberscan be part of the name of a variable, as long as the name starts with a letter oran underscore ’_’. In particular,pony_Cookie32is perfectly ﬁne. Note that certainspecial symbols, such as$,#and%can never be used in the name of a variable.7.The name of a variable cannot contain a "space". That is, you cannot give avariable the namepony Cookie32. Instead, you will have to use something likepony_Cookie32or justponyCookie32.


--- PAGE 4 ---
D-4APPENDIX D. A CRASH COURSE IN PYTHON8.You should not give a variable a name that already means something diﬀerent. Forinstance, do not give a variable the nameprint(however,Printis ﬁne).Here is another example, followed by more comments:Example D.6In Python, we need to be careful with how we place indentations. Forinstance both of the following programs will crash.1a=22b=43c=a+b4print(c)1a=22b=43c=a+b4print(c)9.In Python we need to be careful with how we place indentations. If Python doesnot understand why we make some indentation, it will panic and crash.10.Later in this chapter, we will see situations where indentations become a naturalpart of the code. This is when we use, for instance,for-loops,while-loops, theif-elsestructure, and when we deﬁne functions.Here is one last example, followed by even more comments:Example D.7In contrast to the situation with indentations, Python is much lesssensitive with respect to whether or not we skip a line. In particular, the following codewill run just ﬁne:1a=2;b=4#Twocommandsonthesameline.2c=( a+b )−3#Hereweusesoftparentheses.34print(c)11.Python does not care if you skip a line, or twenty.12.You can place multiple commands on the same line, as long as they are separatedby a semi-colon ’;’.13.Everything you write on a line following a hashtag#is ignored by Python. Thisallows programmers to write comments throughout a code to explain it (usually tothemselves).14.You can use "soft" parentheses ’(’a n d’)’ just as you would in a normal compu-tation. However, these cannot be replaced by hard parentheses ’[’, ’]’o rc u r l yparentheses ’{’, ’}’ as these all mean something diﬀerent to Python.


--- PAGE 5 ---
D.1. INTRODUCTIOND-515.It is a good thing for a program to crash. It is a way for Python of letting youknow that whatever result the program would have given you would probably befalse (since it was written in a bad way). What is much more dangerous is if aprogram is wrong because of, say, some mathematical mistake in some formulathat still makes sense to Python (say, if a plus is mistakenly replaced by a minus).Then the code will run, and you will not be warned that something is wrong :-(Exercise D.8Will the following codes run? If not, why? If yes, what is the output?(a) (b)1a=22b=436=a+b4print(a+b)1a=22b=43a=a+b4print(a)(c) (d)1a=22b=43a=b4print(b)1a=22b=43c=a+b4print(c)(e) (f)1a=2;b =4;a=a+b234print(b)1Ponies =22Cookies =43Rainbows = ponies + cookies4print(rainbows)Exercise D.9Consider the following codes. Can you express mathematically whatthat they compute?(a) (b)1a=12a=a+1/23a=a+1/44a=a+1/85a=a+1/1667print(a)1a=12a=1/(1+a)3a=1/(1+a)4a=1/(1+a)5a=1/(1+a)67print(a)Hint: You have already seen these objects on page 87.


--- PAGE 6 ---
D-6APPENDIX D. A CRASH COURSE IN PYTHONAﬁ r s tl o o ka th o wt oeﬀciently repeat commands in PythonIn exercise D.9 above, you were asked to consider a code where an operation was repeatedmultiple times. When programming, we sometimes want to ask the computer to repeatsome operation perhaps a million or more number of times. Do we really need a millionor more lines of code to do this. Well, of course not. We now explain one way this canbe done using a so-calledfor-loop.
Example D.10 (For-loop)The following codes do exactly the same thing when run:1a=02print(a)3a=14print(a)5a=26print(a)7a=38print(a)9print("theend!")1forninrange(0,4):2a=n3print(a)4print("theend!")We explain the right-most code:Line 1:Here, the commandforninrange(0,4)means that something is to berepeated once for eachnbetween0and3(but not4). What is to be repeated?Well, the code on every line following this one, and which has an indentation1.Lines 2 and 3:These lines are indented. This tells Python that they are to berun by thefor-loop (it does not matter how much they are indented, as long asthey have the same indentation). Speciﬁcally, lines 2 and 3 will ﬁrst be run withn=0, next withn=1,a n ds oo nu n t i ln=3. After this, thefor-loop ends andPython moves on to the ﬁrst unindented line following it.Line 4:Python prints "the end!" as output, and the program ends.Exercise D.11Will these codes run? If so, what are their outputs?(a) (b)1forninrange(0,4):2print(n)3print("mississippi")4print("hello")1forninrange(0,4):2print(n)3print("mississippi")4print("hello")Exercise D.12Rewrite the code in exercise D.9 usingfor-loops.1Note that it does not matter how large this indentation is, however, the indentation must be thesame for all lines in the loop.


--- PAGE 7 ---
D.1. INTRODUCTIOND-7Some words on datatypes in PythonPython stores variables in diﬀerent ways depending on whether they contain text, num-bers or, say, lists. We say that Python uses diﬀerentdatatypes.For instance, Python will treat a number in diﬀerently depending on whether or notit is an integer. Indeed, writinga=2stores the number2as the datatypeinteger,while writinga=2/3stores the fraction2/3as the datatypefloat(calledﬂoating pointnumbers). The advantage of doing this is that it is much easier for a computer to dealwith numbers that do not have long decimal expansions, which allow for programs torun quicker and use less memory. Moreover, as we will see in Section D.5, a computercannot actually store an inﬁnite number of decimals, which inevitably leads to round-oﬀerrors and lack of precision when doing computations with ﬂoating point numbers.To check the datatype of a number we can use the built-in functiontype.
Example D.131a=2#Here,westorethevalue2asaninteger2print(type(a))#Here,wecheckthetypeandtellPythontoprint3#theresultonscreen(itwillprint"int").Exercise D.14(a)Check the type of the variable deﬁned byb=3/2.(b)Check the type of the variable deﬁned byc=4/2.In addition to integers and ﬂoating point numbers, we will encounter the followingdatatypes in this chapter:•String:A variable that contains a string of text is called a string. For instance,a="Hej"will create a variable containing the string of text "Hej".•List:A variable that contains a list of other variables is called... well, a list.For instance,a=[2,3/2,"Hej"]creates a variable that contains an integer, aﬂoating point number and a string. A list can even be made up of other lists (moreon this on the following pages).•Numpy array:A numpy array is a special type of list that can only contain eitherintegers or ﬂoating point numbers (but not both). Since it is more specialised thanthe datatype list, this also means it can have more "advanced" features (more onthis on page D-25).Remark D.15As opposed to many other programming languages, Python is ratherforgiving when it comes to datatypes. For instance, when creating a new variable con-taining some number, Python will itself make a decision of whether or not this is to bean integer or a ﬂoat.


--- PAGE 8 ---
D-8APPENDIX D. A CRASH COURSE IN PYTHONHow to store and manipulate sequences using Python listsOne way of storing sequences in Python is by usinglists. Here are some examples of howto create and manipulate lists:
Example D.161a=[0,1,2,3,4,5]#listofintegers2b=["cheese",88]#listofastringandanicecream34print(a)#printstheentirelist5print(a[0])#prints1stentry6print(a[3])#prints4thentry7print(a[∗1])#printslastentry8print(a[∗2])#printssecondtolastentry910len(a)#computesthelengthofthelist11sum(a)#sumsthetermsofthelist12max(a)#returnsthelargestentryofthelist13min(a)#returnsthesmallestentryofthelist1415a.append("oi")#addsentry"oi"totheendofthelist16a.pop(3)#deletesthe4thentryinthelist17c=a + b#createsthelist[0,1,2,3,4,5,"cheese",88]18d=b−2#createsthelist["cheese",88,"cheese",88]1920e=a [2:5]#createsthelist[2,3,4](calleda"slice")21f=a [2:]#createsthelist[2,3,4,5]22g=a [ :5]#createsthelist[0,1,2,3,4]23h=a [1:4:2]#createsthelist[1,3](everysecondterm)The code is more or less explained by the comments, but we note the following:Lines 1, 2:It is important that we use the square brackets ’[’a n d’]’ whencreating a list and that we separate each entry of the list by a comma ’,’.Lines 5, 6, 7, 8:Here we show how to display various entries of a list. We alsonote that by writing, say,a[3]=10, we change an entry in the list.Lines 11, 12, 13:These only work if the list only contains numbers.Lines 15, 16, 17, 18:There are other ways of representing sequences in Python,and these may have many of the above features. However, what makes lists standout is how easy they are to modify.Line 20, 21, 22, 23:This is called theslicenotation for lists.


--- PAGE 9 ---
D.2. HOW TO COMPUTE AND VISUALIZE SEQUENCES AND SUMSD-9D.2 How to compute and visualize sequences and sumsSome ways to compute sequences in PythonSuppose we want to compute a lot of entries of the sequence⇣12k⌘!k=0=⇣1,12,14,···⌘.First, we point out that it is useful to usefor-loops (this example should be comparedto Example D.10).Example D.17 (Computing sequences using a for-loop)The following two codesdo exactly the same thing when run:1print(1/2−−0)2print(1/2−−1)3print(1/2−−2)1forkinrange(0,3):2print(1/2−−k)Another way of computing lists is to use a list commands called alist comprehension.It has the beneﬁt of both computing and storing a sequence of numbers in just a singleline of code.
Example D.18 (Computing sequences using a list)The following two codes doexactly the same thing when run:1a=[1/2−−0,1/2−−1,1/2−−2]2print(a)1a=[1/2−−kforkinrange(0,3)]2print(a)Exercise D.19Run and compare the output of the codes in the above examples.Exercise D.20Ad iﬀerence between the right-most codes in examples D.17 and D.18is that in the ﬁrst, we donotstore the values of the sequence anywhere. Here are twosuggestions for how to ﬁx this:1a=02forkinrange(0,3):3a=1/2−−k1a=[ ]2forkinrange(0,3):3a.append(1/2−−k)Explain what is going in each code. What information is stored at the end of eachprogram? Also, why do these not give any output? Can you ﬁx this?


--- PAGE 10 ---
D-10APPENDIX D. A CRASH COURSE IN PYTHONSome ways to compute partial sums of inﬁnite seriesOn the previous page, we discussed how to compute and store values of a sequence. Letus now consider how to compute the sum of the ﬁrst, say, million terms of the inﬁniteseries!rk=012k=1+12+14+···.As above, we are going to discuss several ways that this can be done.This ﬁrst example should be compared to part (a) of exercise D.9.
Example D.21 (Computing sums using a for-loop)The following two codes bothcompute the sum1+12+14+18.1a=02a=a+1/2−−03a=a+1/2−−14a=a+1/2−−21a=02forkinrange(0,3):3a=a+1/2−−kTo understand the code in the above example, recall Figure 2 on page D-2, and readthe explanation following Example D.10.Here is how to compute the same sum using lists and list comprehensions.
Example D.22 (Computing a sum using lists)The following two codes do exactlythe same thing when run:1a=[1/2−−0,1/2−−1,1/2−−2]2b=sum(a)1a=[1/2−−kforkinrange(0,3)]2b=sum(a)Note that using the technique of this example, we could actually compute the sumin just one line (!):1b=sum([1/2−−kforkinrange(0,3)])Exercise D.23(a)Run the codes from the examples on this page. Why do they notgive any output? Fix this.(b)Modify (some of) the code on this page so that you can compute the sum of theﬁrst million terms or so. What result do you get?


--- PAGE 11 ---
D.2. HOW TO COMPUTE AND VISUALIZE SEQUENCES AND SUMSD-11How to visualise sequences and partial sums using for-loopsWe now consider how to visualise the data we computed on the previous pages. This isthe ﬁrst point where we will see that for-loops are more ﬂexible, and gives code that iseasier to read, than list comprehensions2.Example D.24The following code is perhaps the simplest way to visualise a sequencein Python. Here, we visualise the sequence⇣12k⌘9k=0.1importmatplotlib.pyplot as plt23forkinrange(0,10):4plt.plot(k,1/2−−k,"bo")56plt.show()To the right, we see the output.
Here is how this code works:Line 1:We import the "package"matplotlib.pyplot.A t t h i s p o i n t , w e d o n o treally have to know what this means. But, in short, this package provides Pythonwith additional commands that help us visualise stuﬀ.A d d i n gas pltallows us torefer to this package by the shorter nameplt.Lines 3, 4:Here we run afor-loop. At each iteration, it asks Python to plot ablue ﬁlled circle (this is what the"bo"means) at the coordinate(k,1/2k).Line 6:The commandplt.show()tells Python that we are done with our ﬁgure,and that it is time to display it. Any subsequent use ofplt.plotwill create a newﬁgure to be displayed separately.Let us now immediately modify the above code, so that we can plot partial sums ofthe inﬁnite series!rk=012k.That is, we want to plot the ﬁrst few we get when we compute0rk=012k=1,1rk=012k=1+12,2rk=012k=1+12+14,2We show how to visualise data stored as lists on page D-13.


--- PAGE 12 ---
D-12APPENDIX D. A CRASH COURSE IN PYTHONand so on. The nice thing is that we can achieve this by a relatively minor modiﬁcationof the above code. Notice how this code combines what we did in examples D.21 andD.24.Example D.25The following code computes and visualises exactly the partial sumsexpressed above.1importmatplotlib.pyplot as plt23a=045forkinrange(0,3):6a=a+1/2−−k7plt.plot(k,a,"bo")89plt.show()Exercise D.26Run this code, and verify by computing the ﬁrst three partial sumsby hand that the plot is correct. What happens when you increaserange(0,3)to, say,range(0,100)?Exercise D.27Several commands can be used to change how the above ﬁgure looks.Try inserting the following into the code. This can be done anywhere after theimportand beforeplt.plot(). What happens?(a)Replace"bo"by"rx".(b)plt.xlim(∗3,15)(c)plt.ylim(∗5,2)(d)plt.xlabel("Therewas")(e)plt.ylabel("agraph")(f)plt.title("thathadatitle")(g)plt.xticks([∗2,0,3,4,6.5,10])(h)plt.yticks([0,1,1.5])(i)plt.grid(True)(j)plt.figure(figsize=(4,3))(k)plt.savefig("myfigure.jpg")Remark: Note that by choosing the extension ".jpg" in (k), you actually tell Pythonto save your ﬁgure as a jpg-ﬁle. Note that only a limited number of ﬁle formats aresupported. For more on how to plot in Python, check out the oﬀcial tutorialhttps://matplotlib.org/users/pyplot_tutorial.htmlwhich has a ton of infor-mation and examples.


--- PAGE 13 ---
D.2. HOW TO COMPUTE AND VISUALIZE SEQUENCES AND SUMSD-13Visualising sequences and partial sums stored as listsWe now give an example where we visualize a sequence stored as a list.
Example D.28We now use lists to create and plot the sequence⇣12n⌘9n=0.1importmatplotlib.pyplot as plt23nValues = [nforninrange(0,10)]4a=[2−−(∗n)forninnValues]56plt.plot(nValues,a,"bo")7plt.show()To the right, we see the output. Note that itmatches exactly that of Example D.24.
While this example is quite similar to Example D.24, let us explain what happens inlines 3, 4 and 6 a bit more carefully:Lines 3, 4:Here we create two lists. The ﬁrst isnValues = [0,1,2, ...,9]which will give us then-values to be used in the plot (these will be placed on thex-axis). The second list,a, contains the sequence we are trying to plot. Thesewill play the part of they-values in our plot. Note that in theforcommand, wecan replace therangecommand by any other list. This is a particular, and ratherelegant, feature of Python.Line 6:Here, we are creating the plot itself. In the commandplt.plot(nValues,a,"bo"),the we use the two lists created in lines 3 and 4. The ﬁrst will be interpreted asthex-coordinates to be used, and the second as their correspondingy-coordinates.Note that it is therefore crucial that these two lists are of the same length (if not,Python will crash), and explains why it is a good idea to let thefor-loop in line 4be deﬁned in terms ofnrunning throughnValues, as this will guarantee that thelistsnValuesandahave the same length.


--- PAGE 14 ---
D-14APPENDIX D. A CRASH COURSE IN PYTHONWe now give an example of how to visualise partial sums using lists.
Example D.29As in Example D.25, we consider the inﬁnite series!rk=012k.The following code should be compared to that of Example D.28, above. It will computethe 19 (!) ﬁrst partial sums of the series. Here, we use the name "indices" instead of"nValues", and vary the letter used for the index from line to line to emphasise that thechoice of letter really does not matter.1importmatplotlib.pyplot as plt23indices = [iforiinrange(0,20)]4a=[1/2−−kforkinindices]56S=[sum(a[0:n+1])forninindices]78plt.plot(indices,S,"bo")9plt.show()To understand this code, you should ﬁrst read the explanation for Example D.28.The diﬀerence is what happens in line 6:Line 6:Here, we use the sum command to sum slices (see Example D.16) of thelist. Here, you should keep in mind that the slice, say,a[0:19]gives you the entriesa[0],a[1],. . . ,a[18]. In particular, there is no point in computinga[0:0]asthis slice contains no terms. More explicitly:n=0 =psum(a[0 : 0 + 1]) =sum(a[0 : 1]) =0rk=012k,n=1 =psum(a[0 : 1 + 1]) =sum(a[0 : 2]) =1rk=012k,...n= 19 =psum(a[0 : 19 + 1]) =sum(a[0 : 20]) =19rk=012k.Exercise D.30Implement the code in Example D.29. Verify that it gives the sameoutput as Example D.25 when the range in the latter example is suitably adjusted.


--- PAGE 15 ---
D.2. HOW TO COMPUTE AND VISUALIZE SEQUENCES AND SUMSD-15A slightly more advanced example: the Fibonacci sequenceAbove we have considered examples of sequences and partial sums that can be computedboth using "pure"for-loops orfor-loops inside of lists (i.e., list comprehensions). Letus now consider a situation where we need to adapt these methods slightly, and use thebest of both worlds.Namely, we consider the sequence(1,1,2,3,5,8,13,...).These are the Fibonacci numbers. In general, then’th Fibonacci number is given bycontinuing this list using the rulean=an11+an12.Note that if we intend for the sequence to start ata0, then this rule cannot be used tocomputea0ora1, since they would then depend ona12anda11. Therefore, it is morecorrect to say that the Fibonacci numbers are created from the set of rules:qXPX|a0=1,a1=1,an=an11+an12forn22.So, how to create a list in Python containing, say, the20ﬁrst Fibonacci numbers? Well,this cannot be done by using a command on the form[???forninrange(0,21)],since there is no way to let then’th number depend on the previous numbers in thesequence3. What to do? Well, here we use a "pure"for-loop, where we store theFibonacci numbers, as they are computed, in a list so that we can use previous Fibonaccinumbers to compute the next numbers.Example D.31The following code can be used to compute Fibonacci numbers.1a=[1,1]23forninrange(2,20):4newterm = a[n∗1]+a [ n∗2]5a.append(newterm)67forninrange(0,20):8print("The",n +1,"’thFibonaccinumberis",a [ n ] )3Well, strictly speaking, there is, but there is no "natural" way to do this in Python.


--- PAGE 16 ---
D-16APPENDIX D. A CRASH COURSE IN PYTHONExercise D.32Implement the code from the above example. Use, say, the wiki-pagefor the Fibonacci numbers to verify that it gives the correct output.Exercise D.33Use the method of the above examples to create a list containing afew partial sums of the inﬁnite series{!k=01/2k.Remark D.34 ("pure"for-loops versus list comprehensions)Above, we sawan example of a situation where the ﬂexibility of "pure"for-loops made them easierto use than the more rigid list comprehensions. Does this mean list comprehensionsare less useful? Well, sort of. In addition, "pure"for-loops are available in mostprogramming languages, while comprehensions are really speciﬁc for Python. This meansthat if you want to be able to adapt to other programming languages, you should uselist comprehensions sparingly.Another feature of Python is that you can measure how long it takes for a programto run. In this way, you can time how long it takes Python to run a limited number ofiterations of some for-loop, and then you can make an informed guesstimate of how longit will take to run, say, a million iterations. Here is how this is done:Remark D.35 (how to time a computation)1importtime2time_start = time.process_time()3#yourcode4time_elapsed = (time.process_time()∗time_start)5print(time_elapsed)Exercise D.36(a)What does the code to theright compute?(b)Do the same as in (a),except do it by ﬁrst getting Python to createa suitable sequencea, and then compute itssum using the commandsum(a).(c)Use thecode from the above remark to compute whichmethod is the fastest.1S=02forninrange(1,100000):3S=S+1/nRemark D.37Python is a useful, but fairly slow, programming language. What youare supposed to observe in the previous exercise is that the built-in commands in Pythonactually are written using much faster languages, such as C++. The morale is: if speedis important, use the built-in functions as much as possible.


--- PAGE 17 ---
D.3. SOME ADDITIONAL CONTROL STATEMENTS IN PYTHOND-17D.3 Some additional control statements in PythonIn the previous section, we consideredfor-loops. Here, we consider some additionalcontrol statements in Python.While-loopsThewhile-loop is a close cousin of thefor-loop. Indeed, in most (if not all) cases, whatyou can do with one of them, you can also do with the other. The point is that in mostsituations, one of them will usually be much easier to use than the other.
Example D.38 (partial sums with a while-loop)The following code computes thesum10rn=11n=1+12+13+···+110.1S=0;n=12whilen< =10:3S=S+1/n4n=n +15print(S)We explain the code:Line 1:We initialise the variablesSandn. (Recall that code separated by asemi-colon is treated as if it was written on separate lines.)Line 2:We start the while-loop. By writingwhilen <=10:we tell Python thatthe code inside of the while-loop (that is, the indented lines) should be repeateduntil the variablenis no longerless than or equal to10.Line 3:The ﬁrst time the while-loop is executed, we haveS=0andn=1. Thismeans that the lineS=S+1/nassignsSthe value1.Line 4:We increase the value ofnby1. (This is something we did not have to doin the for-loop.) Python now takes this, new, value ofn, jumps up to line 2, andchecks if it is less than or equal to10. If it is, the while-loop runs again, if not, itjumps down to the ﬁrst non-indented line (line 5).Remark D.39 (logical operators)In the above example, we see the symbol<=. Thisis a logical operator that checks if something isless than or equal tosomething else (notethat it is important to remember the order of the symbols since=<means nothing toPython). When doing while-loops, the symbols>=,==and != are also useful, where thelatter two checks if two variables are equal or not equal, respectively (note that round-oﬀerrors usually makes it impossible for Python to check if two numbers that arenotintegers are equal – more on this in Section D.5).Exercise D.40Use a while-loop to check how largenhas to be for the partial sumsSn={nk=01/2kis closer to2than1/10000.


--- PAGE 18 ---
D-18APPENDIX D. A CRASH COURSE IN PYTHONIf-else statementsAlongsidefor-a n dwhile-loops, theif-elsestatement is the most important tool inprogramming.Here is a basic example:
Example D.41 (if-statements in Python)1a=1023ifa> =3:4print("aisaBIGnumber")5else:6print("aisatinynumber")Here is an explanation of the code:Lines 3 to 6:Like the while-loop, an if-statement starts out by checking if somecondition is true or not. Here, if the condition is true, line 3 is run. If the conditionis false, then line 5 is run.If you want to add more conditions, you can do this by adding as manyelifcom-mands as you want (notice how we are allowed to use the wordandto combine twoinequalities in our condition – it is also possible to use the keywordor):Example D.421a=1023ifa> =3:4print("aisaBIGnumber")5elifa>∗3anda<3:6print("aisatinynumber")7elifa< =∗3:8print("aisaBIGbutnegativenumber")Exercise D.43Use anif-type statement to modify the code from Example D.31 sothat 1’th, 2’th and 3’th are replaced by 1’st, 2’nd and 3’rd, respectively.


--- PAGE 19 ---
D.3. SOME ADDITIONAL CONTROL STATEMENTS IN PYTHOND-19The break commandAnother keyword we can combine with if-statements (and while-loops) isbreak. Thiscommand tells Python to stop the if-statement (or while-loop) and to continue the pro-gram on the ﬁrst unindented line below it. Since we will not need it, we refer theinterested reader to Google for more further information.Here is an example where we combine theif,breakandforkeywords to mimic awhile-loop.
Example D.44The following code does exactly the same as the one in Example D.381S=02forninrange(1,1000):3ifn>10:4break5S=S+1/n6print(S)Let us brieﬂy explain this code:Line 1:We initialise an integerS(that we will use to keep track of partial sums).Line 2:Here we start out the for-loop. We chooserange(0,1000)large to ensurethat the break command, further down, will have time to kick in.Line 3:We are now inside of the for-loop. Here, we ask the if-command to checkifn>10. If this is not the case, the code will skip the indented lines and continueon line 5. Ifn>10is true, then the indented code on line 4 will be run.Line 4:Here, the break command is activated. It means that the for-loop isstopped. The code will continue on line 8.Line 5:Here, the value ofSis updated.Remark D.45Sometimes we need to put for-loops inside of for-loops (when computingmatrices, this may be the case). When this happens, the break command will only stopthe "inner-most" loop.Exercise D.46Consider the listmyList = [n/(1+n−−2)forninrange(0,10−−6)].(a)Write a code that combines a for-loop with the break command to check whenthe ﬁrst entry in the list is smaller than1014.(b)Do the same as in (a), but with a while-loop and no break command.


--- PAGE 20 ---
D-20APPENDIX D. A CRASH COURSE IN PYTHOND.4 Functions in PythonIn this section, we will mostly limit ourselves to discussingmathematicalfunctions inPython.How to deﬁne a function in PythonHere is a basic example showing how to deﬁne a function in Python.
Example D.47 (Deﬁning functions in Python)In the following code we deﬁnef(x)=x215x+4in Python and compute the valuef(3).1deff(x):2y= x−−2∗5−x+43returny45z=f (3)6print(z)Here is what happens:Line 1:We writedeff(x):to let Python know that we are now about to deﬁnea function that has the namefand that takes one variable, given the namex,as input. It is absolute critical to understand that, at this point, Python will notexecute this code. Instead, we are just telling Python that if the functionfis usedat any subsequent point in the code, then this is the code that should be executed.Line 2:The variableyis assigned the valuex−−2∗5−x+4.Line 3:The value ofyisreturnedas the output off.Lines 5 and 6:In line 5, we ask Python to apply the functionfto the value3.This means that Python will run the code in lines 1, 2 and 3 withx=3. Whenline 3 is executed, thereturnedvalue will be stored in the variablez.I n l i n e 6 ,this value is printed on screen.Exercise D.48(a)Use theif-control statement to implement the absolute valuefunction. Use it on a few values to check that it works.(b)Implement the absolute value function without using theif-control statement.Remark: It is not really necessary to program the absolute value function by hand sinceit already exists in Python as the functionabs(x).Exercise D.49Write the code for a function that will take a list of numbers as input,and return their product as output.Remark: This will be analogue to the functionsum()which takes a list of numbers asinput and returns their sum as output.


--- PAGE 21 ---
D.4. FUNCTIONS IN PYTHOND-21Warning: The importance of local namespacesWe face some dangers when deﬁning functions in Python. First, we need to be aware thatthe variables appearing inside the function deﬁnition arelocaland cannot be accessedoutside of the deﬁnition. Since this is a subtle point that leads to a lot of bad code, weare going to spend a little bit of time discussing it.Here is a ﬁrst example:
Example D.50The following code makes no sense and will crash.1x=32deff(x):3y=x−−2∗5−x+44returny5print(y)Here is what happens:Line 1:We deﬁne a variablexand set its value to3.Lines 2, 3, 4:We deﬁne the functionf. However, this code is never run.Lines 5:Here, Python becomes confused and crashessince no variable calledywas ever created.While the above explanation may seem to make perfect sense, it is actually sort ofmisleading. To understand why, let us take a look at a second example.
Example D.51The following code makes no sense to Python and will crash.1x=32deff(x):3y=x−−2∗5−x+44returny5f(x)6print(y)Take a moment and think about what happens when this code runs. Hopefully, itwill confuse you since the error is rather subtle. Here is the explanation:Lines 1 – 4:This is the same as the code in the previous example. For clarity,we reiterate that the code in lines 2, 3, 4 is not run at this stage.Lines 5, 6:In line 5, ﬁnally, the code in lines 2, 3, 4 is run. Since we putx=3inline 1, it is run with the valuex=3.I nl i n e3 ,ygets the value∗2,a n di nl i n e4 ,


--- PAGE 22 ---
D-22APPENDIX D. A CRASH COURSE IN PYTHONthis value isreturned. The program moves on to line 6, where it tries to print thevalue of the variabley.But this variable has never been created,a n ds oP y t h o ncrashes.Wait, what? Surely, this makes no sense since the variableywas created in line 4and given the value∗2. Well, no: the point is that all variables created in lines 3, 4, 5arelocaland only exist when these lines are run. After the code is done running line 5,all of these local variables are deleted.Maybe things become clearer if we rewrite the explanation of Lines 7, 8 as follows:Lines 7, 8:In line 7, ﬁnally, the code in lines 3, 4, 5 is run. Since we putx=3inline 1, the commandf(x)is read by Python asf(3). Now, the variablexin line3i sn o tt h es a m ea st h ev a r i a b l exfrom line 1, instead, we should think of it hashaving some other name, say,local_x. Since the commandf(3)activated line 3,the ﬁrst thing that happens is that Python setslocal_x =3. Next, in line 4, thevariable is not reallyy,i ti slocal_y, which gets the value∗2.F i n a l l y ,i n l i n e5 ,this value isreturned. This means thatf(x)in line 7 now represents the value∗2.However, since this value is all alone on this line, nothing is done to it, and it issimply forgotten (we could have written, say,z = f(x)to store it). The programmerrily continues on line 8, where it tries to print the value of the variabley.Butthis variable has never been created, and so Python crashes. (Note that as Pythonjumped from line 5 to line 7, the variableslocal_xandlocal_yare deleted frommemory.)In technical terms, it is said that the code inside of the deﬁnition of a functionhas its own localnamespacewhich cannot be called upon in the code outside of thefunction. This is done to "protect" the program from the code inside of the function.To understand why this is necessary, let us look at the following example.
Example D.52Thanks to functions having their own namespace, we can be sure thatthe following code works:1a=[1,2,3]; b = [4,5,6]2c=sum(a)3print(b)The point is that we have no idea how the functionsum(a)is coded. If the localnamespace was not kept separate from the (global) namespace, we could be so unluckythat a variable calledbis used inside of the code for the function. This would thenoverwrite the contents of the variablebthat we created before runningsum(a). Thepoint of having a local namespace is to avoid this and to keep our variables safe fromharm. Yay!


--- PAGE 23 ---
D.4. FUNCTIONS IN PYTHOND-23How to plot functions in Python using listsHere, we demonstrate the ﬁrst out of two methods for plotting functions in Python. Thismethod is really similar to what we did when we plotted sequences stored as lists (recallExample D.28).
Example D.53 (plotting with datatype list)The following code plots the graph off(x)=x2+2x+3over the interval[0,1].1importmatplotlib.pyplot as plt23deff(x):4y=x−−2+2−x+35returny67X=[ n /10forninrange(0,11)]8Y=[ f ( x )forxinX]910plt.plot(X,Y)
Fig. 3. To the left, we see the output of the above code. To the right, we see theoutput if we replace the lineplt.plot(X,Y)withplt.plot(X,Y,"bo").Here, we explain the code.Lines 1 – 5:Here, we import the packagematplotlib.pyplotand deﬁne thefunctionf.Line 7:Here, we create the list[0,1/10,2/10, ...,9/10,1]. This list willplay the part of thex-axis.Line 8:Here, we create the list[f(0), f(1/10), f(2/10), ..., f(9/10), f(1)].This list provides they-values given byy=f(x)for eachxin the listX. Noticehow we can replacerange(0,11)in thefor-statement with other lists.


--- PAGE 24 ---
D-24APPENDIX D. A CRASH COURSE IN PYTHONLine 10:The commandplt.plot(X,Y)is very similar to the one appearing whenwe plotted the sequence in Example D.28. It takes two lists, in this caseX=[x0,x1,...]andY=[y0,y1,...]as input. It then draws a straight (blue) line fromthe point(x0,y0)to(x1,y1). And then from(x1,y1)to(x2,y2)and so on until itruns out of points. If the listsXandYare not of equal length, the program getsconfused and crashes. If we add the option"bo"to the commandplt.plot(X,Y),we tell Python not to draw lines, and instead just put blue dots, as we have donebefore (and as is shown above)!
Fig. 4. We are never really plotting the graph of a functionfbased on all its valueson an interval[a,b]. In reality, we only check they-values for certainx-values andthen ask Python to connect the dots.Exercise D.54Plot the functions you implemented in exercise D.48 on[12,2].Exercise D.55Consider the following code.1importmatplotlib.pyplot as plt23N=1045defa(k):6return1/2−−k78defS(a,n):9returnsum([a(k)forkinrange(0,n)])1011nValues = [nforninrange(0,N)]12Y=[ S ( a , n )forninnValues]1314plt.plot(nValues,Y,"bo")(a)Explain in mathematical term what this code does.(b)The symbolatakes more than one role in the above code. Explain what rolesthese are.(c)Make the code easier to read by givingadiﬀerent names where possible.


--- PAGE 25 ---
D.4. FUNCTIONS IN PYTHOND-25Plotting functions using numpy arraysWe now give an alternative, and rather elegant, way to plot functions. The price topay is that we need to introduce a new datatype commonly referred to asnumpy arrays(strictly speaking, Python calls themnumpy.ndarray’s, but we will ignore this).In a sense, numpy arrays are just like lists, but with the restriction that they canconsist of numbers (lists can also consist of, say, strings of text). But this means that itmakes sense for numpy arrays to have additional features related to numbers.Example D.56 (features of the datatype numpy array)The following code ismeant to illustrate some of the things we can do with numpy arrays.1importnumpy as np23deff(x):4returnx−−256a=[1,2,3,4]; b = [1,2,5,3]78A=n p . a r r a y ( a )#Hereweconvertthelistsaandbintonumpy9B=n p . a r r a y ( b )#arrays.Usually,arraysareexpressedlikelists10#butwithoutcommas.E.g.,nowA=[1234].1112C=A−B#ThisresultsinC=[141512].13D=A + B#ThisresultsinD=[2487].14E=A / B#Thisresultsin...well,itdividesthetwolists,15#entrybyentry:∗)1617F=n p . z e r o s ( (3))#Createsthearray[000]18G=n p . o n e s ( (4))#Createsthearray[1111]19H=n p . arange(4)#Createsthearray[0123]20I=n p . l i n s p a c e (0,1,5)#Createsthearray[00.250.50.751]2122J=I . t o l i s t ( )#ConvertsthenumpyarrayItoalistJ.23K=f ( A )#thisresultsinK=[14916]Let us make the following comments with respect to the above example:Line 1:Before we can use numpy arrays we have to import the packagenumpy.Lines 8, 9, 22:We can always convert a list (with only numerical entries) to anumpy array, and vice versa. When creating a numpy array, normally we wouldjust write, say,A = np.array([1,2,3,4]).


--- PAGE 26 ---
D-26APPENDIX D. A CRASH COURSE IN PYTHONLine 20:The commandnp.linspace(a,b,N)creates an array withNequallyspaced points from the interval[a,b], starting and ending at the left and right end-points, respectively. This command is very useful when we want to plot functions!Line 23:When applying a mathematical functionfto the numpy arrayA=[0123],what happens is that we obtain the arrayJ = f(A) = [f(0) f(1) f(2) f(3)]. Thisis also very useful when we want to plot functions!Here is how to plot functions using numpy arrays.
Example D.57The following code gives exactly the same output as the code in Ex-ample D.53.1importmatplotlib.pyplot as plt2importnumpy as np34deff(x):5y=x−−2+2−x+36returny78X=n p . l i n s p a c e (0,1,11)9Y=f ( X )1011plt.plot(X,Y)Exercise D.58Try to use numpy arrays to plot the functions from exercise D.48. Forone of them, the code will not work. Can you imagine why?


--- PAGE 27 ---
D.4. FUNCTIONS IN PYTHOND-27Predeﬁned functions in PythonWe now describe some of the pre-deﬁned function that comes with Python. Usually, itis a good idea to use these whenever you can since they are optimised to run fast usingtechniques way outside the scope of these lecture notes.Remark D.59 (Built in functions in Python)Here is a list of some of the functionsthat are built into Python.•abs(x)– computes the absolute value ofx.•complex(a,b)– returns the complex numbera+ib.•float(x)– converts integer to a ﬂoat.•int(x)– convertes ﬂoat to integer (rounds down to nearest integer).•round(a,n)– rounds the ﬂoating point numberato itsnﬁrst digits.•type(x)–r e t u r n st h ed a t a t y p eo ft h ev a r i a b l ex.For the full list, see, e.g., https://docs.python.org/3/library/functions.html.Additional functions can be imported from packages. For instance, here is a list ofsome functions from thenumpy(numerical Python) package:Remark D.60 (Functions in the numpy package)To use these functions, youneed to start your code withimportnumpy as np. You now have access to the followingfunctions:•np.exp(x)– the exponential function•np.log(x)–t h en a t u r a ll o g a r i t h m•np.log2(x)– the logarithm with base2•np.log10(x)– the logarithm with base10•np.sin(x)– the sine function (radians)•np.cos(x)– the cosine function (radians)•np.tan(x)– the tangent function (radians)•np.arcsin(x)– the arcsine•np.arccos(x)– the arccosine•np.arctan(x)– the arctangentHere are some other useful functions:•np.absolute(x)– gives the absolute value ofx•np.deg2rad(x)– converts degrees into radians•np.rad2deg(x)– converts radians into degrees


--- PAGE 28 ---
D-28APPENDIX D. A CRASH COURSE IN PYTHON•np.sum(x)– returns the sum of the elements of a list/array•np.prod(x)– returns the product of the elements of a list/array•np.imag(z)– returns imaginary part of the complex numberz.•np.real(z)– returns real part of the complex numberz.•np.angle(z)– returns the angle of the complex numberz(radians).•np.conj(z)– returns the complex conjugate of the complex numberz.Here are some constants:•np.pi– gives⇡•np.e– giveseFor more, see https://docs.scipy.org/doc/numpy-1.13.0/reference/routines.math.htmlHere is a brief example of how to use thenumpypackage.Example D.611importnumpy as np2y=n p . s i n ( n p . p i )#Computessin(pi).3print(y)#Printstheresultonscreen.There are also other packages with even more functions. We can mention themathandscipy(scientiﬁc python) packages. However, since we are quite happy with what wehave mentioned above, we will skip these. (In particular, thenumpypackage essentiallymakes themathpackage obsolete – especially when working with numpy arrays)


--- PAGE 29 ---
D.5. HOW NUMBERS ARE REPRESENTED IN PYTHOND-29D.5 How numbers are represented in PythonWe end this appendix by examining how numbers are represented in Python and somepeculiar consequences of this.Example D.62At the start of Chapter 3, we considered the inﬁnite series!rk=012k=1+12+14+18+···.LettingSndenote then’th partial sum of this inﬁnite series, the point of exercise D.5was for you to notice that21Sn=12n.In particular, for alln N,w eh a v eSn6=2.But here is the thing: if if we ask Python to compute, say,S100, then Python willgive the outputS100=2. But this is wrong! WhileS100is close to2, it is not equal to2. Yikes!Exercise D.63Does Python really mean thatS100=2, or is there something elsegoing on? One way to double check this is to ask Python to compute1/(21S100).What happens?So, what is going on here? Well, the point is that since there is a limit to how muchmemory Python is willing to use to represent a number, there is also a limit to howprecisely Python will represent that number. This inevitably leads to so-calledround-oﬃerrorswhen working with computers, and it is vital that have some understanding ofwhy they occur.How integers are represented in Python
The ﬁrst question we ask is the following, what exactly happens when we run, say:1myNumber =82If the code is run on an 8 bit computer, the following happens:
Fig. 5. On the most fundamental level, the memory of the computer is described interms of bits and bytes. A bit can be either0or1, while a byte is a string of8bits.Modern computers normally set aside 64 bits for each integer.


--- PAGE 30 ---
D-30APPENDIX D. A CRASH COURSE IN PYTHONThat is, Python sets aside a certain amount of memory (depending on the type ofcomputer you run it on), and use it to store your integer. By giving it a name such asmyNumber, we know how to access this part of the memory, and by giving it adatatype,Python will knows how to interpret the of0’s and1’s located there. Integers are usuallystored using variables of the datatypeint(short for integer).Remark D.64Inside the circuits of a computer, the1’s are represented by a shortpulse of electricity, while the0’s are represented by the lack of such a pulse. Now, itwould make sense to design the circuitry of a computer so that every integer between0and9was represented. Indeed, one could model the integers by using varying intensitiesof the pulse. However, a reason for just working with0’s and1’s is that this reduces thechance that some disturbance will make the computer mistake one value for another.This leads to the following mathematical question: how to represent all integersusing only0’s and1’s? The thing to realise is that this is not so diﬀerent from thefollowing question: how to represent all integers using only strings of digits from the list{0,1,2,3,...,9}?Example D.65 (Decimal and binary notation)So what do we really mean by theinteger4132? Well, this:4132 = 4·1000 + 1·100 + 3·10 + 2·1=4·103+1·102+3·101+2·100.(Here, we included the second line to emphasise how the powers of10occur in thisexpression.) In fact, we are so used to thinking about integers as decimal numbers thatit is completely obvious for us that we can represent all numbers in this way.But how to represent integers just using a string of0’s and1’s? For instance, whatnumber should the string, say,1101represent? Well, here is the basic idea:1101 = 1·8+1·4+0·2+1·1=1·23+1·22+0·21+1·20.When1101is interpreted in this way, we call it a binary number. (Again, we includethe second line to emphasise how the powers of2occur in this expression.)Let us now consider two questions: 1) why is the basic idea shown in the aboveexample actually quite reasonable, and 2) how to know if the number1101is supposedto be interpreted in the above sense (i.e., as a binary number) and not as the decimalnumberone-thousand-one-hundred-and-one?


--- PAGE 31 ---
D.5. HOW NUMBERS ARE REPRESENTED IN PYTHOND-31To answer the second question ﬁrst: when it is not clear if we are talking about binaryor decimal representations of numbers, we can use the notations(1101)2and(1101)10toindicate that we mean binary or decimal notation, respectively.But what about the ﬁrst question? Well, using the idea shown above, here is howcounting in binary works:(0)2= 0 (11)2= 3 (110)2=6(1)2= 1 (100)2= 4 (111)2=7(10)2= 2 (101)2= 5 (1000)2=8Notice that this is exactly how counting with two digits should work! Every time we runout of digits, we start over by including an extra zero and carrying over a one. Indeed,this is what happens when you count using ten digits and want to count past9or, forthat matter, past19. The thing with counting in binary is that this happens a lot!Exercise D.66Check that the above list is correct, and continue the list to20.Remark D.67 (Binary numbers in 8-bit computers)Here is a slightly simpliﬁedexplanation of how an 8-bit computer would interpret the string of0’s and1’s in thebyte shown in Figure 5 (see Remark D.69 below for a hint of the full story):
Fig. 6. The ﬁrst 7 bits (from the right) combine to form the binary representation ofthe integer. The left-most bit tells us if the binary number is positive or negative.Exercise D.68(a)What is the largest integer you can represent as an 8 bit integer?(b)Modern computers use 64 bit integers, where 1 bit is used for the sign and 63 forthe number itself. What is the largest integer you can represent using a 64 bit integer?Remark D.69 (Two’s complement)Strictly speaking, our explanation for how inte-gers are represented is only correct for positive integers. For negative integers, it wouldbe kind of stupid to do exactly as we describe since then we would have two diﬀerentways of representing the integer0(indeed, both the bytes0000 0000and1000 0000wouldrepresent0). Instead, an alternative strategy calledtwo’s complementis used. We willnot explain it here (Wikipedia has a nice page on this), but it allows the computer torepresent one extra negative number, meaning that on an 8 bit computer we can repre-sent every integer between1128and127. (And, perhaps more importantly, usingtwo’scomplementallows the hardware to speed up integer arithmetic.)


--- PAGE 32 ---
D-32APPENDIX D. A CRASH COURSE IN PYTHONHow non-integers are represented in Python
We now turn to how real numbers that are not integers, such as1/10 = 0.1and!2=1.4151..., are represented in a computer. First, we note that since!2has aninﬁnite number of digits, it should be clear that this number cannot be representedexactly. What may come as a surprise is that not even0.1can be stored correctly!So, what is going on? First, we need to know that when storing real numbers thatare not integers, your computer uses the datatypefloat.Remark D.70 (sloppy description of 64 bit ﬂoating numbers)A 64 bit computersets aside 64 bits to represent the real number on the form✏·10⇡,where thefraction✏is (roughly) a16digit integer (positive or negative) and theexponent↵is (roughly) an integer between1340and+292.Here, we use the wordsessentiallyandroughlysince we lose a little bit in the trans-lation from binary to decimal numbers. However, before formulating a more correctdescription of ﬂoating point numbers in binary language, let us try to get some intuitionfrom the sloppy deﬁnition. To this end, we consider the following example.Example D.71According to the sloppy description, how is the number!2=1.414213562373095048801688724209698078569...stored? Well,roughlyas1414213562373095·10115.That is, the computer stores up to16digits in✏(starting with the ﬁrst non-zero digitfrom the left), and the position of the decimal point in the↵. In particular, since a lotof information is thrown away, this means that we get a round-oﬀerror!Exercise D.72According to the sloppy deﬁnition,(a)how far is it between the ﬂoat-ing point representation of!2and its closest ﬂoating point "neighbour"?(b)Howfar is it betweenx=0and the next ﬂoating point number?
Fig. 7. As indicated by the above exercise, the ﬂoating point line is not a continuousline, instead it consists of many points with some short distance between them.


--- PAGE 33 ---
D.5. HOW NUMBERS ARE REPRESENTED IN PYTHOND-33Exercise D.73Puta= 325660000,b=0.000032566and use Python to compute100)(a+b),1000)(a+b)and10000)(a+b). How are the results of these computationsstored? Are there any round-oﬀerrors?Remark: If you want to force Python to show you, say, 20 decimals places of a variablea,y o uc a nu s et h ec r a z yl o o k i n gc o m m a n dprint("{:.20f}".format(a)).Exercise D.74Use the sloppy description of ﬂoat numbers to do the following:(a)Explain how largeNhas to be for the computer to think that1+21N=1.(b)How large doesNhave to be for the computer to think that21N=0?Hint: Recycle your answers from D.72.Now, notice the following. According to our sloppy description, above, it makes nosense that the number1/10 = 0.1cannot be represented accurately as a ﬂoating pointnumber. Indeed, the number1/10ought to have the simple representation1·1011.So what is going on? Well, to explain this, we need a more accurate description ofﬂoating point numbers. As a ﬁrst step, we need to understand how binary notationworks for non-integers.Example D.75 (binary notation for non-integers)The way to represent non-integers in binary notation is essentially completely analogous to how we do this fordecimal numbers. Indeed, compare(643.57)10=6·102+4·101+3·100+5·1101+7·1102and(101.01)2=1·22+0·21+1·20+0·121+1·122.Exercise D.76As a small taste of binary arithmetic, ﬁgure out both the decimal andbinary representations of the numbers(a)(101.01)2·22(b)(101.01)2·21(c)(101.01)2·211We now formulate the more accurate description of ﬂoating point numbers.


--- PAGE 34 ---
D-34APPENDIX D. A CRASH COURSE IN PYTHONRemark D.77 (a more accurate description of 64 bit ﬂoating point numbers)A 64 bit ﬂoating point number is stored on the form(1.✏)2·2⇡,where thefraction✏is a string of 52 bits, and theexponent↵is a 11 bit integer. Theremaning bit is used to store the sign of the ﬂoating point number.When the exponent↵is the smallest possible, then(1.✏)2is replaced by(0.✏)2. (Thisis done to oﬀer additional accuracy close to the origin.)Here is a visual representation of the memory used for a 64 bit ﬂoating point number:
Fig. 8. Keep in mind that out of the 11 bits used for the exponent, one of them isused to denote the sign. In addition, it is not completely accurate to think of the53 bits used for the fraction as a binary integer (see example below).Since the notation used in the above description may be a bit confusing, let us consideran example.Example D.78How to store the number1/10a ﬂoating point number? In order notto have to write strings of 53 bits, let us pretend that we are working with 16 bit ﬂoatingpoint numbers (so-called half-precision ﬂoats).
Fig. 9. 16 bit ﬂoats are exactly like 64 bit ﬂoats, except that less bits are availablefor the fraction and exponent.First, expressing1/10on binary form (see exercises below for how to do this), we seethat⇣110⌘10=( 0.00011001100110011...)2,where the pattern keeps repeating. That is, the binary expansion of1/10is not ﬁnite!This means that to store it as a 16 bit (or 64 bit) ﬂoating point number, we are forced


--- PAGE 35 ---
D.5. HOW NUMBERS ARE REPRESENTED IN PYTHOND-35into making a round-oﬀerror! Indeed, here is the representation of1/10as a ﬂoatingpoint number:1.100110011z} 8=↵·21(100)2,and here is exactly how this would look in the memory of the 16 bit computer:
Fig. 10. Note that since the fraction appears on the right-hand side of a "binarycomma", its right-most zeroes can be ignored.Exercise D.79Translate the "accurate description" of 64 bit ﬂoating point numbersto decimal notation to obtain the "sloppy description" at the start of this section. Inparticular, you need to take into account the added accuracy close to the origin.Exercise D.80(Challenging)Explain what are the only fractions that can be rep-resented without round-oﬀerror as 64 bit ﬂoating point numbers.Remark D.81 (The eﬀect of round-oﬀerrors)When using Python (or any other computer program)to compute and visualise data, we constantly need toask ourselves if the results of our computations makesense, or if they are the artiﬁcial results of round-oﬀerror. For instance, to the right, we see a visualisationoff(x)=2x·ln(1 + 21x)which is utter nonsense (thisfunction appears in, e.g., Chapter 4).



--- PAGE 36 ---
D-36APPENDIX D. A CRASH COURSE IN PYTHOND.6 Answers to selected exercisesD.4(a)addition,(b)subtraction,(c)multiplication,(d)power,(e)division,(f)ﬂoordivision (returns the result of the division rounded down),(g)modulo (returns thenumerator of the "remainder term" of the division),.D.8(a),(d)and(f)will not run.D.9(a)1+1/2+1/4+1/8+1/16,(b)11+11+11+11+1D.11The code in(a)will run.D.36The code computes the partial sumS99999of the harmonic series. The speed ofthe computations will depend on your processor.D.40There are many ways to write this code. Here is one:1sum=02k=03whileabs(sum∗2)> =1/10000:4sum=sum+1/2−−k5k=k+1#Keepinmindthatinawhile∗loop,6#wemustupdatekmanually.7print(k∗1)D.46(a)1k=02forxinmyList:3ifx<10−−(∗4):4break5k=k +16print(k)(b)1k=02whilemyList[k] >10−−(∗4):3k=k +14print(k)


--- PAGE 37 ---
D.6. ANSWERS TO SELECTED EXERCISESD-37D.48Below, notice that we cannot call the absolute value functionabs, since this keywordis already taken (for Python’s own version of the absolute value function).(a)1defabsolute1(x):2ifx>=0:3returnx4else5return∗x(b)1defabsolute2(x):2return(x−−2)−−(1/2)D.491defproduct(x):2temp_prod =13forainx:4temp_prod = temp_prod−x5returntemp_prodD.54Here is how to plot the ﬁrst:1importmatplotlib.pyplot as plt2#insertcodeforthedefinitionofabsolute13X=[ k /10forkinrange(∗20,21)]4Y=[ a b s o l u t e1(x)forxinX]5plt.plot(X,Y)D.58This will not work forabsolute1since if-statement in the deﬁnition of the functiondoes not make sense ifxis a list or a numpy array. Forabsolute2, the followingcode will work:1importmatplotlib.pyplot as plt2importnumpy as np3#insertcodeforthedefinitionofabsolute24X=n p . l i n s p a c e (∗2,2,40)5Y=a b s o l u t e2(X)6plt.plot(X,Y)D.63Python crashes and returns the error message: "ZeroDivisionError: division byzero". In other words, Python really believes thatS100=2.


--- PAGE 38 ---
D-38APPENDIX D. A CRASH COURSE IN PYTHOND.66Here are the ﬁrst twenty numbers in both binary and decimal notation:
D.68(a){6n=02n=2711 = 127,(b){62n=02n.D.72(a)Roughly10116,(b)101340.D.73According to the sloppy descriptiona+bis stored as3256600000000325·1017. Whenprinting100)(a+b),1000)(a+b)and10000)(a+b)in in Python, you will seethat the17’th digit keeps changing due to the round-oﬀerror (Python essentiallykeeps guessing this digit wrong).D.74(a)N253,(b)N21075(these answers can be checked by doing the computa-tions in Python).D.76(a)(10101)2= 21,(b)(1010.1)2= 10.5,(c)(10.101)2=2.625.D.79↵is between11024and1023(counting two’s complement). This means that2⇡is between101308and10308, roughly. Taking into account that the✏in our roughnotation is a number between1and1016, and that in the accurate description(1.✏)2is replaced by(0.✏)2when↵=11024, we should get the rough description(roughly).D.80Exactly the fractionsa/2n, whereais an integer, andnis a natural number. Theseare exactly the numbers with ﬁnite binary expansions (prove this!).
